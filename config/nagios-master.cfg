# Non comment lines are YAML
#
# Strings ought to be in double quotes, but it works in most cases if they aren't :)
#
# vim:set syntax=yaml:

# TODO
#  - spohr: hpasmd
#  - *: mailq
#  - *: check munin stats collection works
#  - *: check backups are successful
#  - *: unwanted: network: auth, discard, daytime, time (on some), cvs-pserver, rsync (on some), ftp (on some), http (on some)
#  - mundy: salinfo_decode

# down:
#  - sarti
#  - leisner

---
#############################
# hosts
#############################
servers:
  gw-man-da:
    address: 82.195.75.126
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
    contacts: joerg, bzed
  gw-man-da2:
    address: 82.195.75.46
    parents: gw-man-da
    hostgroups: routing-infrastructure
    contacts: joerg, bzed
  gw-HP-ftc:
    address: 192.25.206.1
    parents: spohr
    hostgroups: routing-infrastructure
  gw-brainfood:
    address: 70.103.162.1
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-brown.edu:
    address: 128.148.34.1
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-osuosl:
    address: 140.211.166.1
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-scanplus-villa:
    address: 212.211.132.1
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-scanplus-lobos:
    address: 212.211.132.249
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-mit-csail:
    address: 128.30.0.254
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-xs4all:
    address: 194.109.137.217
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-umn.edu:
    address: 128.101.240.222
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-dg-i.net:
    address: 93.94.130.190
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
    contacts: bzed
  gw-freenet:
    address: 62.104.23.249
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-sanger:
    address: 193.62.202.18
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
    contacts: tjrc1
  gw-frost:
    address: 130.81.242.195
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-1und1:
    address: 195.20.247.54
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
    contacts: joerg
  gw-1und1-karlsruhe:
    address: 212.227.120.29
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-blackcat:
    address: 193.201.200.129
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-nmmn:
    address: 217.114.76.81
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-utwente:
    address: 130.89.149.1
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  #gw-ughent:
  #  address: 157.193.39.254
  #  parents: gw-HP-ftc
  #  hostgroups: routing-infrastructure
  gw-agnesi:
    address: 65.173.90.22
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-ubc:
    address: 137.82.84.94
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
    contacts: lfilipoz
  gw-ubcnew:
    address: 206.12.19.254
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
    contacts: lfilipoz
  gw-carnet:
    address: 161.53.160.1
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-telegraaf:
    address: 82.94.249.153
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-helsinki:
    address: 128.214.173.25
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
    contacts: holger
  gw-telefonica:
    address: 195.71.99.193
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-ball:
    address: 78.32.9.209
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-cst:
    address: 213.188.99.215
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-isc:
    address: 149.20.20.1
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-aca:
    address: 130.239.18.97
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-esiee:
    address: 195.220.83.13
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-ghent:
    address: 193.191.17.50
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure
  gw-anu:
    address: 150.203.164.38
    parents: gw-HP-ftc
    hostgroups: routing-infrastructure

  global:
    hostgroups: notacomputer
    pingable: false
    check_command: dsa_check_always_ok

  samosa:
    address: 192.25.206.57
    parents: spohr
    hostgroups: computers, service, dl380, lenny, hassrvfs, hasbootfs, acpid-hosts, ulogd-hosts, nfs-client, postgres84-hosts
  raff:
    address: 192.25.206.59
    parents: spohr
    hostgroups: computers, no-udev, service, dl380, apache2-hosts, bind9-hosts, rsyncd-hosts, heavy-exim, ulogd-hosts, nfs-client, lenny, hasvarfs, hasusrfs
  merkel:
    address: 192.25.206.16
    parents: spohr
    hostgroups: computers, general, apache2-hosts, rsyncd-hosts, sw-raid, postgres83-hosts, heavy-exim, nfs-client, ulogd-hosts, lenny
  merkel2:
    address: 192.25.206.71
    parents: merkel
    hostgroups: secondary-IPs
  spohr:
    address: 192.25.206.33
    hostgroups: computers, service, dl380, apache2-hosts, postgres83-hosts, ulogd-hosts, nfs-server, lenny, spamd, heavy-exim, bind9-hosts
  spohr2:
    address: 192.25.206.38
    parents: spohr
    hostgroups: secondary-IPs
  peri:
    address: 192.25.206.15
    parents: spohr
    hostgroups: computers, buildd, sw-raid, hasbootfs, lenny, single-cpu
    contacts: dannf
  penalosa:
    address: 192.25.206.68
    parents: spohr
    hostgroups: computers, buildd, hasbootfs, lenny
    contacts: dannf
  mundy:
    address: 192.25.206.62
    parents: spohr
    hostgroups: computers, buildd, lenny
  paer:
    address: 192.25.206.11
    parents: spohr
    hostgroups: computers, porterbox, lenny, hasbootfs, hashomefs, single-cpu
  merulo:
    address: 192.25.206.58
    parents: spohr
    hostgroups: computers, porterbox, lenny, hasusrfs

  bartok:
    address: 82.195.75.91
    parents: gw-man-da
    hostgroups: computers, service, dl385, bind9-hosts, lenny, hasvarfs
    contacts: joerg, bzed
  #morales:
  #  address: 82.195.75.97
  #  parents: gw-man-da
  #  hostgroups: computers, porterbox, single-cpu, no-samhain, hasbootfs, hassrvfs, lenny, hasvarfs, hasusrfs
  #  contacts: bzed
  sperger:
    address: 82.195.75.34
    parents: gw-man-da2
    hostgroups: computers, porterbox, sw-raid, hasbootfs, lenny
    contacts: bzed
  agricola:
    address: 82.195.75.86
    parents: gw-man-da
    hostgroups: computers, porterbox, sw-raid, single-cpu, lenny, hassrvfs
    contacts: bzed
  arcadelt:
    address: 82.195.75.87
    parents: gw-man-da
    hostgroups: computers, buildd, sw-raid, single-cpu, lenny, hassrvfs
    contacts: bzed
  liszt:
    address: 82.195.75.100
    parents: gw-man-da
    hostgroups: computers, service, apache2-hosts, bind9-hosts, postfix-hosts, heavy-postfix, amavis-hosts, dl385, acpid-hosts, lenny
    contacts: bzed
#  auber:
#    address: 82.195.75.101
#    parents: gw-man-da
#    hostgroups: computers, no-udev, buildd, sw-raid
#    contacts: bzed
  unger:
    address: 82.195.75.102
    parents: gw-man-da
    hostgroups: computers, service, dl360, acpid-hosts, lenny
  handel:
    address: 82.195.75.104
    parents: unger
    hostgroups: computers, service, acpid-hosts, lenny, hasbootfs
  geo1:
    address: 82.195.75.105
    parents: unger
    hostgroups: computers, service, acpid-hosts, lenny, hasbootfs, bind9-hosts
  draghi:
    address: 82.195.75.106
    parents: unger
    hostgroups: computers, service, acpid-hosts, lenny, hasbootfs, hassrvfs, apache2-hosts, bind9-hosts, spamd, heavy-exim, ulogd-hosts
  kaufmann:
    address: 82.195.75.107
    parents: unger
    hostgroups: computers, service, lenny, hasbootfs, apache2-hosts, single-cpu, rsyncd-hosts
  byrd:
    address: 82.195.75.101
    parents: unger
    hostgroups: computers, service, lenny, hasbootfs, hassrvfs, postgres84-hosts, heavy-exim

  master:
    address: 70.103.162.29
    parents: gw-brainfood
    hostgroups: computers, general, apache2-hosts, bind9-hosts, spamd, heavy-exim, highload, lenny
  murphy:
    address: 70.103.162.31
    parents: gw-brainfood
    hostgroups: computers, general, dl380, acpid-hosts, lenny, buildd, hasbootfs, hassrvfs


  ries:
    address: 128.148.34.103
    parents: gw-brown.edu
    hostgroups: computers, service, apache2-hosts, bind9-hosts, ftpd-hosts, dl385, rsyncd-hosts, postgres83-hosts, spamd, heavy-exim, acpid-hosts, lenny, uploadqueue

  mayer:
    address: 140.211.166.78
    parents: gw-osuosl
    hostgroups: computers, buildd, hasbootfs, lenny
  mayr:
    address: 140.211.166.58
    parents: gw-osuosl
    hostgroups: computers, buildd, hasbootfs, lenny
  malo:
    address: 140.211.166.27
    parents: gw-osuosl
    hostgroups: computers, buildd, lenny, smart
  rietz:
    address: 140.211.166.43
    parents: gw-osuosl
    hostgroups: computers, no-udev, service, apache2-hosts, bind9-hosts, rsyncd-hosts, dl385, heavy-exim, highload, hasbootfs
  rietz2:
    address: 140.211.166.44
    parents: rietz
    hostgroups: secondary-IPs
  busoni:
    address: 140.211.15.34
    parents: gw-osuosl
    hostgroups: computers, service, lenny, dl360, hassrvfs, acpid-hosts
  zee:
    address: 140.211.166.16
    parents: gw-osuosl
    hostgroups: computers, porterbox, lenny, hassrvfs, hasbootfs

  villa:
    address: 212.211.132.32
    parents: gw-scanplus-villa
    hostgroups: computers, service, apache2-hosts, ftpd-hosts, rsyncd-hosts, dl380, lenny, hasvarfs, hasusrfs
  lobos:
    address: 212.211.132.250
    parents: gw-scanplus-lobos
    hostgroups: computers, service, apache2-hosts, ftpd-hosts, rsyncd-hosts, dl380, lenny, hasvarfs, hasusrfs
  gluck:
    address: 150.203.164.38
    parents: gw-anu
    hostgroups: computers, service, apache2-hosts, ftpd-hosts, rsyncd-hosts, dl380, lenny, no-udev, hassrvfs, acpid-hosts

  steffani:
    address: 128.31.0.36
    parents: gw-mit-csail
    hostgroups: computers, service, apache2-hosts, ftpd-hosts, rsyncd-hosts, sw-raid, bind9-hosts, acpid-hosts, hasbootfs, lenny
  mahler:
    address: 128.31.0.46
    parents: gw-mit-csail
    hostgroups: computers, single-cpu, lenny, porterbox
  rore:
    address: 128.31.0.49
    parents: gw-mit-csail
    hostgroups: computers, service, lenny, dl360, acpid-hosts, hassrvfs, ulogd-hosts, apache2-hosts
  senfl:
    address: 128.31.0.51
    parents: gw-mit-csail
    hostgroups: computers, service, lenny, dl360, acpid-hosts, hassrvfs, ulogd-hosts, apache2-hosts, rsyncd-hosts
  carver:
    address: 128.31.0.50
    parents: gw-mit-csail
    hostgroups: computers, service, lenny, dl380, acpid-hosts, hassrvfs, ulogd-hosts

  klecker:
    address: 194.109.137.218
    parents: gw-xs4all
    hostgroups: computers, service, apache2-hosts, ftpd-hosts, rsyncd-hosts, bind9-hosts, dl385, spamd, heavy-exim, lenny

  saens:
    address: 128.101.240.212
    parents: gw-umn.edu
    hostgroups: computers, service, apache2-hosts, ftpd-hosts, rsyncd-hosts, dl380, lenny, hasvarfs, hasusrfs

  argento:
    address: 93.94.130.160
    parents: gw-dg-i.net
    hostgroups: computers, buildd, sw-raid, single-cpu, lenny, hassrvfs
    contacts: bzed

  widor:
    address: 93.94.130.161
    parents: gw-dg-i.net
    hostgroups: computers, apache2-hosts, sw-raid, lenny, acpid-hosts
    contacts: bzed

  pergolesi:
    address: 62.104.23.252
    parents: gw-freenet
    hostgroups: computers, porterbox, sw-raid, lenny, hasusrfs

  albeniz:
    address: 193.62.202.27
    parents: gw-sanger
    # SMP kernel doesn't run stable
    hostgroups: computers, porterbox, sw-raid, single-cpu, hasbootfs, lenny
    contacts: tjrc1
  goetz:
    address: 193.62.202.26
    parents: gw-sanger
    # SMP kernel doesn't run stable
    hostgroups: computers, buildd, sw-raid, single-cpu, hasbootfs, lenny
    contacts: tjrc1
  smetana:
    address: 193.62.202.29
    parents: gw-sanger
    hostgroups: computers, porterbox, sw-raid, lenny
    contacts: tjrc1

  voltaire:
    address: 72.66.115.54
    parents: gw-frost
    hostgroups: computers, buildd, lenny, hasvarfs, hashomefs
    contacts: sfrost

  puccini:
    address: 87.106.4.56
    parents: gw-1und1
    hostgroups: computers, buildd, lenny, ulogd-hosts, hassrvfs
    contacts: joerg
  powell:
    address: 87.106.64.223
    parents: gw-1und1
    hostgroups: computers, service, spamd, heavy-exim, rsyncd-hosts, ulogd-hosts, acpid-hosts, lenny, hassrvfs, hasvarfs, hasusrfs
    contacts: joerg

  schumann:
    address: 212.227.126.54
    parents: gw-1und1-karlsruhe
    hostgroups: computers, acpid-hosts, ulogd-hosts, lenny
  wieck:
    address: 195.20.242.89
    parents: gw-1und1-karlsruhe
    hostgroups: computers, service, apache2-hosts, ftpd-hosts, rsyncd-hosts, acpid-hosts, ulogd-hosts, lenny
  chopin:
    address: 195.20.242.124
    parents: schumann
    hostgroups: computers, service, apache2-hosts, ulogd-hosts, lenny, hassrvfs, hasbootfs, rsyncd-hosts, uploadqueue
  geo3:
    address: 195.20.242.125
    parents: schumann
    hostgroups: computers, service, lenny, hasbootfs, single-cpu, bind9-hosts
  soler:
    address: 195.20.242.126
    parents: schumann
    hostgroups: computers, service, lenny, hasbootfs, hassrvfs

  caballero:
    address: 193.201.200.200
    parents: gw-blackcat
    hostgroups: computers, no-udev, buildd, sw-raid, lenny

  pescetti:
    address: 217.114.76.85
    parents: gw-nmmn
    hostgroups: computers, porterbox, single-cpu, smart, lenny

  kassia:
    address: 130.89.149.224
    parents: gw-utwente
    hostgroups: computers, service, apache2-hosts, ftpd-hosts, rsyncd-hosts, dl360, acpid-hosts, ulogd-hosts, lenny, incomingmailrelayed
  kassia-sec:
    address: 130.89.149.225
    parents: kassia
    hostgroups: secondary-IPs
  kassia-ftp:
    address: 130.89.149.226
    parents: kassia
    hostgroups: secondary-IPs
  kassia-volatile:
    address: 130.89.149.227
    parents: kassia
    hostgroups: secondary-IPs

  ancina:
    address: 157.193.39.13
    parents: gw-ghent
    hostgroups: computers, buildd, single-cpu, lenny, hassrvfs, hasbootfs, incomingmailrelayed2025
    contacts: luk

  agnesi:
    address: 67.233.102.241
    parents: gw-agnesi
    hostgroups: deadslow, lenny

  spontini:
    address: 137.82.84.65
    parents: gw-ubc
    hostgroups: computers, buildd, hasbootfs, lenny
    contacts: lfilipoz
  ravel:
    address: 206.12.19.5
    parents: gw-ubcnew
    hostgroups: computers, general, dl385, apache2-hosts, acpid-hosts, ftpd-hosts, hasbootfs, lenny, nfs-server, rsyncd-hosts, bind9-hosts, uploadqueue
  dijkstra:
    address: 206.12.19.218
    parents: gw-ubcnew
    hostgroups: computers, bl460, acpid-hosts, lenny, ulogd-hosts
  luchesi:
    address: 206.12.19.214
    parents: gw-ubcnew
    hostgroups: computers, bl460, acpid-hosts, lenny, ulogd-hosts
  wolkenstein:
    address: 206.12.19.116
    parents: dijkstra
    hostgroups: computers, lenny, hasbootfs, hassrvfs
  brahms:
    address: 206.12.19.115
    parents: dijkstra
    hostgroups: computers, lenny, buildd, hasbootfs, hassrvfs
  geo2:
    address: 206.12.19.113
    parents: dijkstra
    hostgroups: computers, service, lenny, hasbootfs, single-cpu, bind9-hosts
  duarte:
    address: 206.12.19.114
    parents: dijkstra
    hostgroups: computers, lenny, hasbootfs, hassrvfs, single-cpu
  valente:
    address: 206.12.19.112
    parents: dijkstra
    hostgroups: computers, lenny, hasbootfs, single-cpu, hassrvfs, postgres83-hosts, ftpd-hosts, rsyncd-hosts
  bellini:
    address: 137.82.84.79
    parents: gw-ubc
    hostgroups: computers, lenny, hasbootfs, nfs-client, hassrvfs, aacraid, heavy-exim
  morricone:
    address: 137.82.84.81
    parents: gw-ubc
    hostgroups: computers, lenny, hasbootfs, hassrvfs, aacraid, postgres83-hosts, ftpd-hosts, rsyncd-hosts
  stabile:
    address: 137.82.84.72
    parents: gw-ubc
    hostgroups: computers, lenny, hashomefs, sw-raid, rsyncd-hosts, postgres84-hosts
  cimarosa:
    address: 137.82.84.80
    parents: gw-ubc
    hostgroups: computers, lenny, hasbootfs, aacraid, hassrvfs, nfs-client
  paganini:
    address: 137.82.84.82
    parents: gw-ubc
    hostgroups: computers, lenny, hasbootfs, aacraid, hassrvfs
  respighi:
    address: 137.82.84.83
    parents: gw-ubc
    hostgroups: computers, lenny, hasbootfs, aacraid, hassrvfs
  vivaldi:
    address: 206.12.19.12
    parents: gw-ubcnew
    hostgroups: computers, lenny, hasbootfs, aacraid, hassrvfs
  # MSA 2000 (2012i)
  giustini:
    address: 192.168.2.6
    parents: dijkstra
    hostgroups: notacomputer
    # unless we implement runfrom for host alive checks
    pingable: false
    check_command: dsa_check_always_ok

  lebrun:
    address: 193.198.184.10
    parents: gw-carnet
    hostgroups: computers, buildd, sw-raid, lenny
  schroeder:
    address: 193.198.184.11
    parents: gw-carnet
    hostgroups: computers, buildd, sw-raid, hasbootfs, lenny

  tartini:
    address: 82.94.249.158
    parents: gw-telegraaf
    hostgroups: computers, sw-raid, apache2-hosts, mysql-hosts, hasbootfs, hassrvfs, ulogd-hosts, lenny, hasvarfs, hasusrfs

  piatti:
    address: 193.167.161.225
    parents: gw-helsinki
    hostgroups: computers, dl385, ulogd-hosts, acpid-hosts, apache2-hosts, lenny, hasbootfs, incomingmailrelayed2025
    contacts: holger

  rem:
    address: 195.71.99.217
    parents: gw-telefonica
    hostgroups: computers, buildd, hasbootfs, lenny, hashomefs

  ball:
    address: 78.32.9.213
    parents: gw-ball
    hostgroups: computers, buildd, no-udev, dialup, hasbootfs, lenny, hashomefs

  zelenka:
    address: 80.245.147.40
    parents: gw-HP-ftc
    hostgroups: computers, porterbox, lenny, hassrvfs

  escher:
    address: 213.188.99.215
    parents: gw-cst
    hostgroups: computers, single-cpu, hasbootfs, lenny, hasvarfs, hashomefs
  goedel:
    address: 213.188.99.214
    parents: gw-cst
    hostgroups: computers, single-cpu, hasbootfs, lenny

  schein:
    address: 149.20.20.6
    parents: gw-isc
    hostgroups: computers, service, apache2-hosts, ftpd-hosts, rsyncd-hosts, acpid-hosts, lenny, dl360, bind9-hosts

  praetorius:
    address: 130.239.18.121
    parents: gw-aca
    hostgroups: computers, buildd, lenny

  lafayette:
    address: 147.215.7.160
    parents: gw-esiee
    hostgroups: computers, buildd, lenny, sw-raid, hassrvfs, hasbootfs

#############################
# host groups
#
# hostgroups ircd and all are automatically defined
#
#############################
hostgroups:
  computers:
    alias: computers
    private: 1
  routing-infrastructure:
    alias: Internet routers and friends
    extinfo-icon_image: base/switch40.png
    extinfo-icon_image_alt: router
  notacomputer:
    alias: Systems that are not really systems.  Yeah :)
    private: 1
  deadslow:
    alias: Systems too slow to run any real checks
  dialup:
    alias: Systems with slow network

  porterbox:
    alias: developer accessible porter machines
    extinfo-icon_image: base/debian.png
    extinfo-icon_image_alt: Debian GNU/Linux
    extinfo-notes_url: http://db.debian.org/machines.cgi?host=%s
  service:
    alias: machines running services
    extinfo-icon_image: base/debian.png
    extinfo-icon_image_alt: Debian GNU/Linux
    extinfo-notes_url: http://db.debian.org/machines.cgi?host=%s
  buildd:
    alias: buildd systems
    extinfo-icon_image: base/debian.png
    extinfo-icon_image_alt: Debian GNU/Linux
    extinfo-notes_url: http://db.debian.org/machines.cgi?host=%s
  general:
    alias: general purpose developer accessible machines
    extinfo-icon_image: base/debian.png
    extinfo-icon_image_alt: Debian GNU/Linux
    extinfo-notes_url: http://db.debian.org/machines.cgi?host=%s

  dl380:
    alias: HP DL380 hosts
    private: 1
  dl385:
    alias: HP DL385 hosts
    private: 1
  dl360:
    alias: HP DL360 hosts
    private: 1
  bl460:
    alias: HP BL460 blades
    private: 1
  sw-raid:
    alias: Hosts with Linux software raid
    private: 1
  aacraid:
    alias: Hosts with Adaptec AACraid
    private: 1
  single-cpu:
    alias: Hosts with only one CPU
    private: 1

  lenny:
    alias: Hosts running lenny, not etch
    private: 1

  no-samhain:
    alias: hosts not running samhain properly
    private: 1

  postfix-hosts:
    alias: hosts running postfix instead of exim
    private: 1
  heavy-exim:
    alias: "hosts running the full mail stuff, including clamav and postgrey"
    private: 1
  spamd:
    alias: "hosts running spamassassin as daemon"
    private: 1
  heavy-postfix:
    alias: "postfix hosts running the full mail stuff, including clamav, SA, postgrey, policyd-weight"
    private: 1
  apache2-hosts:
    alias: hosts running apache2
    private: 1
  bind9-hosts:
    alias: hosts running bind9
    private: 1
  amavis-hosts:
    alias: hosts running amavis
    private: 1
  ftpd-hosts:
    alias: hosts running vsftpd
    private: 1
  #tftpd-hosts:
  #  alias: hosts running a tftpd (tftpd-hpa as a daemon)
  #  private: 1
  rsyncd-hosts:
    alias: hosts providing rsync services via xinetd
    private: 1
  #postgres81-hosts:
  #  alias: hosts running postgres81
  #  private: 1
  postgres83-hosts:
    alias: hosts running postgres83
    private: 1
  postgres84-hosts:
    alias: hosts running postgres84
    private: 1
  mysql-hosts:
    alias: hosts running mysql
    private: 1
  no-udev:
    alias: hosts not using udev
    private: 1
  ulogd-hosts:
    alias: hosts running ulogd
    private: 1
  acpid-hosts:
    alias: hosts running acpid
    private: 1
  uploadqueue:
    alias: hosts that are an anonymous ftp uploadqueue
    private: 1

  nfs-client:
    alias: hosts mounting filesystems using NFS
    private: 1
  nfs-server:
    alias: hosts serving filesystems using NFS
    private: 1

  highload:
    alias: "hosts on which high load is normal"
    private: 1

  secondary-IPs:
    alias: secondary IP addresses
    private: 1

  smart:
    alias: hosts with smartd
    private: 1
  hasbootfs:
    alias: hosts with a /boot filesystem
    private: 1
  hassrvfs:
    alias: hosts with a /srv filesystem
    private: 1
  hashomefs:
    alias: hosts with a /home filesystem
    private: 1
  hasvarfs:
    alias: hosts with a /var filesystem
    private: 1
  hasusrfs:
    alias: hosts with a /usr filesystem
    private: 1

  incomingmailrelayed:
    alias: incoming mail needs to go through a mail relay
    # i.e. no port 25
    private: 1
  incomingmailrelayed2025:
    alias: incoming mail needs to go through a mail relay
    # i.e. no port 25
    private: 1

#############################
# servicegroups
#############################
servicegroups:
  diskspace:
    alias: diskusage checks
  buildd:
    alias: buildd checks
  raid:
    alias: raid checks
  kernel:
    alias: kernel checks
  weaksshkeys:
    alias: weak ssh keys
  apt:
    alias: apt upgrade status
  samhain:
    alias: samhain integrity status
  security:
    alias: security
    servicegroup_members: apt, weaksshkeys, kernel, samhain

#############################
# services
#############################
services:
  -
    name: PING
    check: "check_ping!300.0,20%!600.0,40%"
    hostgroups: pingable
    excludehostgroups: routing-infrastructure, dialup
    normal_check_interval: 5
    max_check_attempts: 4
    retry_check_interval: 1
  -
    name: PING
    check: "check_ping!2000.0,60%!3000.0,80%"
    hostgroups: routing-infrastructure, dialup
    normal_check_interval: 5
    max_check_attempts: 4
    retry_check_interval: 1

 ############ Services ############
 ###

 ############ Disk Usage ############
 ####
  -
    name: disk usage - all
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk -X devpts -X proc 90 95"
    hostgroups: computers
  -
    name: disk usage on /
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 80 90 /"
    hostgroups: computers
    excludehosts: ries, klecker
  -
    name: disk usage on /
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 93 96 /"
    hosts: ries, klecker
  -
    name: disk usage on /boot
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 75 85 /boot"
    hostgroups: hasbootfs
  -
    name: disk usage on /var
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 75 90 /var"
    hostgroups: hasvarfs
  -
    name: disk usage on /org
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 80 90 /org"
    hosts: sperger, raff, lobos, villa, steffani, saens, pergolesi, spontini, ravel, mahler, schroeder, piatti, pescetti, widor, schein, lebrun
  -
    name: disk usage on /org
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 90 95 /org"
    hosts: merkel, bartok
  -
    name: disk usage on /srv
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 80 90 /srv"
    hostgroups: hassrvfs
  -
    name: disk usage on /org/scratch
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 80 90 /org/scratch"
    hosts: merkel
  -
    name: disk usage on /tmp
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 60 80 /tmp"
    hosts: raff, saens, puccini, merkel, tartini, powell, piatti, escher
  -
    name: disk usage on /usr
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 75 90 /usr"
    hostgroups: hasusrfs
  -
    name: disk usage on /home
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 75 90 /home"
    hostgroups: hashomefs
  -
    name: disk usage on /mnt/hdc
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 75 90 /mnt/hdc"
    hosts: voltaire
  -
    name: disk usage on /mnt/sdb1
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 75 90 /mnt/sdb1"
    hosts: spontini
  -
    name: disk usage on /x
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 75 90 /x"
    hosts: caballero
  -
    name: disk usage on /var/lib/postgresql
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 75 90 /var/lib/postgresql"
    hosts: samosa
  -
    name: disk usage on /srv/morgue.debian.org
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 80 90 /srv/morgue.debian.org"
    hosts: stabile
  -
    name: disk usage on /srv/mirrors
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 80 90 /srv/mirrors"
    hosts: stabile
  -
    name: disk usage on /srv/ftp-master.debian.org
    servicegroups: diskspace
    nrpe: "/usr/lib/nagios/plugins/check_disk 80 90 /srv/ftp-master.debian.org"
    hosts: stabile

 ############ All Computers ############
 ####
  -
    name: apt - security updates
    servicegroups: apt
    nrpe: "/usr/lib/nagios/plugins/dsa-check-statusfile /var/cache/dsa/nagios/apt"
    hostgroups: computers
    normal_check_interval:  60
    retry_check_interval: 15
 ####
  -
    name: backup
    nrpe: "sudo /usr/lib/nagios/plugins/dsa-check-dabackup"
    hostgroups: computers
    normal_check_interval: 60
    max_check_attempts: 2
    retry_check_interval: 5
  -
    name: backup server config
    nrpe: "/usr/lib/nagios/plugins/dsa-check-dabackup-server"
    hosts: bartok
    normal_check_interval: 60
    max_check_attempts: 2
    retry_check_interval: 5

 ####
  -
    name: running kernel
    servicegroups: kernel
    nrpe: "/usr/lib/nagios/plugins/dsa-check-running-kernel"
    hostgroups: computers
    normal_check_interval: 60
    retry_check_interval: 5

 ####
  -
    name: puppet
    nrpe: "/usr/lib/nagios/plugins/dsa-check-file_age -i 540 -f /var/lib/puppet/state/state.yaml"
    hostgroups: lenny
    excludehosts: agnesi

 ####
  -
    name: process - samhain
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:8 -c 1: -u root -C samhain -a '/usr/sbin/samhain'"
    hostgroups: computers
    excludehostgroups: no-samhain
  -
    name: samhain
    servicegroups: samhain
    nrpe: "/usr/lib/nagios/plugins/dsa-check-statusfile /var/cache/dsa/nagios/samhain"
    hostgroups: computers
    excludehostgroups: no-samhain
    depends: process - samhain
    normal_check_interval: 60
    retry_check_interval: 5

 ####
  -
    name: users
    nrpe: "/usr/lib/nagios/plugins/check_users 30 35"
    hostgroups: computers
 ####
  -
    name: load
    nrpe: "/usr/lib/nagios/plugins/check_load -w 30,28,26 -c 50,45,50"
    hostgroups: computers
    excludehostgroups: highload
  -
    name: load
    nrpe: "/usr/lib/nagios/plugins/check_load -w 140,120,100 -c 240,220,200"
    hostgroups: highload
    excludehosts: rietz
  -
    name: load
    nrpe: "/usr/lib/nagios/plugins/check_load -w 200,200,200 -c 350,350,350"
    hosts: rietz
 ####
  -
    name: processes - zombies
    nrpe: "/usr/lib/nagios/plugins/check_procs 5 10 -s Z"
    hostgroups: computers
 ####
  -
    name: processes - total
    nrpe: "/usr/lib/nagios/plugins/check_procs 620 700"
    hostgroups: computers
    excludehosts: liszt
  -
    name: processes - total
    nrpe: "/usr/lib/nagios/plugins/check_procs 800 1000"
    hosts: liszt
 ####
  -
    name: swap usage - percent
    nrpe: "/usr/lib/nagios/plugins/check_swap -w 20% -c 10%"
    hostgroups: computers
 ####
  -
    name: swap usage - mb
    nrpe: "/usr/lib/nagios/plugins/check_swap -w 20000 -c 5000"
    hostgroups: computers
 ####
  -
    name: process - getty
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:8 -c 1: -u root -C getty -a /sbin/getty"
    hostgroups: computers
    excludehosts: zelenka
 ####
  -
    name: process - sshd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:20 -c 1: -u root -C sshd -a '/usr/sbin/sshd'"
    hostgroups: computers
  -
    name: "network service - sshd"
    check: dsa_check_ssh
    hostgroups: computers
    depends: process - sshd
    normal_check_interval:  60
    notification_interval: 1440

  -
    name: "network service - sshd - 2260"
    check: dsa_check_ssh_port!2260
    hosts: agnesi
    normal_check_interval:  180

  -
    name: "network service - sshd - version"
    check: "dsa_check_ssh_port_version!22!OpenSSH_4.3p2 Debian-9etch3"
    depends: network service - sshd
    hostgroups: computers, deadslow
    excludehostgroups: lenny
    normal_check_interval:  60
  -
    name: "network service - sshd - version"
    check: "dsa_check_ssh_port_version!22!OpenSSH_5.1p1 Debian-5"
    depends: network service - sshd
    hostgroups: lenny
    excludehosts: agnesi
    normal_check_interval:  60
  -
    name: "network service - sshd - version - 2260"
    check: "dsa_check_ssh_port_version!2260!OpenSSH_5.1p1 Debian-5"
    depends: network service - sshd - 2260
    hosts: agnesi
    normal_check_interval:  60
 #
  -
    name: ssh - weak keys
    servicegroups: weaksshkeys
    nrpe: "/usr/lib/nagios/plugins/dsa-check-statusfile /var/cache/dsa/nagios/weak-ssh-keys"
    hostgroups: computers
    normal_check_interval:  60
 ####
  -
    name: network service - nrpe
    check: check_tcp!5666
    hostgroups: computers
    max_check_attempts: -2
    notification_interval: 1440
  -
    name: process - nrpe
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:25 -c 1: -u nagios -C nrpe -a '/usr/sbin/nrpe -c /etc/nagios/nrpe.cfg -d'"
    hostgroups: computers
    max_check_attempts: -1
    depends: network service - nrpe
 ###
  -
    name: process - munin-node
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:2 -c 1: -u root -C munin-node -a '/usr/sbin/munin-node'"
    hostgroups: computers
  -
    name: network service - munin-node
    check: check_tcp!4949
    hostgroups: computers
    depends: process - munin-node
 ###
  -
    name: process - ntpd
    # sarge: nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C ntpd -a '/usr/sbin/ntpd -p /var/run/ntpd.pid'"
    # etch: nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u ntp -C ntpd -a '/usr/sbin/ntpd -p /var/run/ntpd.pid'"
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -C ntpd -a '/usr/sbin/ntpd -p /var/run/ntpd.pid'"
    hostgroups: computers
    excludehosts: zelenka
  -
    name: network service - ntp
    check: dsa_check_ntp
    hostgroups: computers
    depends: process - ntpd
    excludehosts: zelenka, ancina
  #
  -
    name: network service - time
    check: dsa_check_time
    hosts: zelenka, ancina
    depends: process - xinetd

 ###
  -
    name: process - atd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u daemon -C atd -a /usr/sbin/atd"
    hostgroups: computers
 ###
  -
    name: process - cron
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:2 -c 1: -u root -C cron -a /usr/sbin/cron"
    hostgroups: computers

 ###
  -
    name: process - syslog-ng
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C syslog-ng  -a '/sbin/syslog-ng -p /var/run/syslog-ng.pid'"
    hostgroups: lenny
    hosts: rietz
    excludehosts: agnesi

 ### MAIL STUFF
 ###
  -
    name: process - exim
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:10 -c 1: -u Debian-exim -C exim4 -a '/usr/sbin/exim4 -bd -q'"
    hostgroups: computers
    excludehostgroups: postfix-hosts
    excludehosts: master, rietz, merkel, byrd
  -
    name: process - exim - total
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:50 -c 1: -C exim4"
    hostgroups: computers
    excludehostgroups: postfix-hosts
    excludehosts: master, rietz, merkel, byrd
  -
    name: process - exim
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:300 -c 1:500 -C exim4 -a '/usr/sbin/exim4'"
    hosts: master, rietz, merkel, byrd
 ###
  -
    name: process - clamav - clamd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:2 -c 1: -u clamav -C clamd -a '/usr/sbin/clamd'"
    hostgroups: heavy-exim, heavy-postfix
  -
    name: service - clamav
    nrpe: "/usr/lib/nagios/plugins/check_clamd -H /var/run/clamav/clamd.ctl"
    hostgroups: heavy-exim, heavy-postfix
    depends: process - clamav - clamd
  -
    name: process - clamav - freshclam
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u clamav -C freshclam -a '/usr/bin/freshclam -d --quiet'"
    hostgroups: heavy-exim, heavy-postfix
  -
    name: unwanted process - clamav
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C clamd"
    hostgroups: computers
    excludehostgroups: heavy-exim, heavy-postfix
  -
    name: unwanted process - freshclam
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C freshclam"
    hostgroups: computers
    excludehostgroups: heavy-exim, heavy-postfix
  -
    name: process - spamd - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C spamd -a '/usr/sbin/spamd --create-prefs --max-children 5 --helper-home-dir -d --pidfile=/var/run/spamd.pid'"
    hostgroups: spamd
    excludehosts: powell
  -
    name: process - spamd - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C spamd -a '/usr/sbin/spamd --create-prefs --max-children 20 --min-spare=5 --helper-home-dir -d --pidfile=/var/run/spamd.pid'"
    hosts: powell
  -
    name: process - spamd - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C spamd -a '/usr/sbin/spamd --create-prefs --max-children 10 --helper-home-dir -d --pidfile=/var/run/spamd.pid'"
    hosts: liszt
  -
    name: process - spamd - child
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:11 -c 1: -C spamd -a 'spamd child'"
    hosts: liszt
    hostgroups: spamd
    depends: process - spamd - master
  #
  -
    name: process - spamd - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u debbugs -C spamd -a '/usr/sbin/spamd -d '"
    hosts: rietz
  -
    name: process - spamd - child
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:6 -c 1: -u debbugs -C spamd -a 'spamd child'"
    hosts: rietz
  #
  -
    name: unwanted process - spamd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C spamd"
    hostgroups: computers
    excludehostgroups: spamd
    excludehosts: liszt, rietz

 ###
  #-
  #  name: process - greylistd
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u greylist -C greylistd -a '/usr/bin/python /usr/sbin/greylistd'"
  #  hostgroups: heavy-exim
  #
  -
    name: unwanted process - greylistd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C greylistd"
    hostgroups: computers

 ###
  -
    name: process - postgrey
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgrey -C postgrey -a '/usr/sbin/postgrey --pidfile=/var/run/postgrey.pid --daemonize --unix=/var/run/postgrey/socket --retry-window=4 --auto-whitelist-clients=10 --exim'"
    hostgroups: heavy-exim
  -
    name: process - postgrey
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgrey -C postgrey -a '/usr/sbin/postgrey --pidfile=/var/run/postgrey.pid --daemonize --inet=127.0.0.1:60000'"
    hostgroups: heavy-postfix
  #
  -
    name: unwanted process - postgrey
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C postgrey"
    hostgroups: computers
    excludehostgroups: heavy-postfix, heavy-exim
 ###
  -
    name: process - amavis - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u amavis -C amavisd-new -a 'amavisd (master)'"
    hostgroups: amavis-hosts
  -
    name: process - amavis - all
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:10 -c 1:10 -u amavis -C amavisd-new -a 'amavisd '"
    hostgroups: amavis-hosts
    depends: process - amavis - master
  #
  -
    name: unwanted process - amavis
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C amavisd-new"
    hostgroups: computers
    excludehostgroups: amavis-hosts
 ###
  -
    name: process - weightd - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u polw -C policyd-weight -a 'policyd-weight (master)'"
    hostgroups: heavy-postfix
  -
    name: process - weightd - cache
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u polw -C policyd-weight -a 'policyd-weight (cache)'"
    hostgroups: heavy-postfix
    depends: process - weightd - master
  -
    name: process - weightd - child
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 2:50 -c 1: -u polw -C policyd-weight -a 'policyd-weight (child)'"
    hostgroups: heavy-postfix
    depends: process - weightd - master
  #
  -
    name: unwanted process - policyd-weight
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C policyd-weight"
    hostgroups: computers
    excludehostgroups: heavy-postfix



 ###
  -
    name: process - postfix - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C master -a '/usr/lib/postfix/master'"
    hostgroups: postfix-hosts
  -
    name: process - postfix - qmgr
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postfix -C qmgr -a 'qmgr -l -t fifo -u'"
    hostgroups: postfix-hosts
    depends: process - postfix - master
  #-
  #  name: process - postfix - tlsmgr
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postfix -C tlsmgr -a 'tlsmgr -l -t fifo -u'"
  #  hostgroups: postfix-hosts
  #  depends: process - postfix - master
  -
    name: process - postfix - pickup
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postfix -C pickup -a 'pickup -l -t fifo -u -c'"
    hostgroups: postfix-hosts
    depends: process - postfix - master
  -
    name: process - postfix - anvil
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:1 -c 0: -u postfix -C anvil -a 'anvil -l -t unix -u'"
    hostgroups: postfix-hosts
    depends: process - postfix - master

  -
    name: process - postfix - trivial-rewrite
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:10 -c 0:15 -u postfix -C trivial-rewrite -a 'trivial-rewrite -n rewrite -t unix -u -c'"
    hostgroups: postfix-hosts
    depends: process - postfix - master
  -
    name: process - postfix - proxymap
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:10 -c 0:15 -u postfix -C proxymap -a 'proxymap -t unix -u'"
    hostgroups: postfix-hosts
    depends: process - postfix - master
  -
    name: process - postfix - cleanup
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:30 -c 0:50 -u postfix -C cleanup -a 'cleanup -z -t unix -u -c'"
    hostgroups: postfix-hosts
    depends: process - postfix - master
  -
    name: process - postfix - local
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:30 -c 0:50 -u postfix -C local -a 'local -t unix'"
    hostgroups: postfix-hosts
    depends: process - postfix - master

  -
    name: process - postfix - smtpd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:150 -c 0:200 -u postfix -C smtpd -a 'smtpd -n smtp -t inet -u -c'"
    hosts: liszt
    depends: process - postfix - master
  -
    name: process - postfix - smtp
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:350 -c 0:500 -u postfix -C smtp -a 'smtp -t unix -u -c'"
    hosts: liszt
    depends: process - postfix - master

 ###
  -
    name: network service - smtp
    check: dsa_check_smtp
    hostgroups: computers
    excludehostgroups: postfix-hosts, incomingmailrelayed, incomingmailrelayed2025
    depends: process - exim

  -
    name: network service - smtp
    check: dsa_check_smtp
    hostgroups: postfix-hosts
    depends: process - postfix - master
  -
    name: network service - submission
    check: dsa_check_smtp_port!587
    hostgroups: incomingmailrelayed
    depends: process - exim
  -
    name: network service - smtp 2025
    check: dsa_check_smtp_port!2025
    hostgroups: incomingmailrelayed2025
    depends: process - exim
  -
    name: network service local - smtps cert
    nrpe: "/usr/lib/nagios/plugins/check_http -H localhost -p 465 -S -C 14 -t 45"
    hostgroups: postfix-hosts
    depends: process - postfix - master
    normal_check_interval: 120


  -
    name: setup - dsa config
    nrpe: "/usr/lib/nagios/plugins/dsa-check-config"
    hostgroups: computers
    normal_check_interval: 60
  -
    name: setup - ud-ldap freshness
    nrpe: "/usr/lib/nagios/plugins/dsa-check-udldap-freshness"
    hostgroups: computers
 ###
  -
    name: process - uptimed
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u daemon -C uptimed -a '/usr/sbin/uptimed'"
    hostgroups: computers
 ###
  -
    name: process - irqbalance
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C irqbalance -a '/usr/sbin/irqbalance'"
    hostgroups: computers
    excludehostgroups: single-cpu
  -
    name: unwanted process - irqbalance
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C irqbalance"
    hostgroups: single-cpu

 ####
 ###
  #-
  #  name: unwanted process - system-tools-backends
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C system-tools-ba"
  #  hostgroups: computers
  #-
  #  name: unwanted process - dbus-daemon
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C dbus-daemon"
  #  hostgroups: computers
  -
    name: unwanted process - gkrellmd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C gkrellmd"
    hostgroups: computers
  -
    name: unwanted process - portmap
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C portmap"
    hostgroups: computers
    excludehostgroups: nfs-client, nfs-server
  -
    name: unwanted process - rpc.statd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C rpc.statd"
    hostgroups: computers
    excludehostgroups: nfs-client, nfs-server
  -
    name: unwanted process - inetd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C inetd"
    hostgroups: computers
    excludehosts: rietz
  -
    name: unwanted process - snmpd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C snmpd"
    hostgroups: computers

 ####
  -
    name: "host SSL cert"
    nrpe: "if [ -e /etc/ssl/certs/thishost.pem ]; then /usr/lib/nagios/plugins/dsa-check-cert-expire /etc/ssl/certs/thishost.pem; else echo 'No thishost.pem on this host.'; fi"
    hostgroups: computers

 ############ Processes/Services that only run on some computers ############
 ####
 ###
  -
    name: process - rngd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C rngd  -a '/usr/sbin/rngd -r /dev/hwrng'"
    hostgroups: dl385
 ###
  -
    name: process - mdadm monitor
    servicegroups: raid
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1:1 -u root -C mdadm -a '/sbin/mdadm --monitor --pid-file /var/run/mdadm/monitor.pid --daemonise --scan'"
    hostgroups: sw-raid
  -
    name: RAID - sw raid
    servicegroups: raid
    nrpe: "/usr/lib/nagios/plugins/dsa-check-raid-sw"
    hostgroups: sw-raid

 ###
  -
    name: process - monit
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1:1 -u root -C monit -a '/usr/sbin/monit -d 300 -c /etc/monit/monitrc -s /var/lib/monit/monit.state'"
    hostgroups: lenny
    excludehosts: agnesi
 ###
  -
    name: process - cpqarrayd
    servicegroups: raid
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1:1 -u root -C cpqarrayd -a '/usr/sbin/cpqarrayd'"
    hostgroups: dl385, dl380, dl360, bl460
  -
    name: RAID - arrayprobe
    servicegroups: raid
    nrpe: "sudo /usr/bin/arrayprobe"
    hostgroups: dl385, dl380, dl360, bl460
  -
    name: HW - hpacucli status
    servicegroups: raid
    nrpe: "/usr/lib/nagios/plugins/dsa-check-hpacucli"
    normal_check_interval: 120
    hostgroups: dl385, dl380, dl360, bl460
 ###
  -
    name: RAID - areca
    servicegroups: raid
    nrpe: "/usr/lib/nagios/plugins/dsa-check-raid-areca"
    hosts: powell
 ###
  -
    name: RAID - aacraid
    servicegroups: raid
    nrpe: "/usr/lib/nagios/plugins/dsa-check-raid-aacraid"
    hostgroups: aacraid
 ###
  -
    name: RAID - 3ware
    servicegroups: raid
    nrpe: "/usr/lib/nagios/plugins/dsa-check-raid-3ware"
    hosts: puccini
 ###
  -
    name: RAID - MPT
    servicegroups: raid
    nrpe: "/usr/lib/nagios/plugins/dsa-check-raid-mpt"
    hosts: master

 ###
  -
    name: process - slapd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:20 -c 1:50 -u openldap -C slapd -a '/usr/sbin/slapd -h ldap:/// ldaps:/// -g openldap -u openldap'"
    hosts: draghi
 ###
  -
    name: process - ulogd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C ulogd -a '/usr/sbin/ulogd -d'"
    hostgroups: ulogd-hosts
  -
    name: unexpected process - ulogd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C ulogd"
    hostgroups: computers
    excludehostgroups: ulogd-hosts
 ###
  -
    name: process - udevd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C udevd -a 'udevd'"
    hostgroups: computers
    excludehostgroups: no-udev
  -
    name: unexpected process - udev
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C udevd"
    hostgroups: no-udev
 ###
  -
    name: process - acpid
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C acpid -a '/usr/sbin/acpid'"
    hostgroups: acpid-hosts
  -
    name: unexpected process - acpid
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C acpid"
    hostgroups: computers
    excludehostgroups: acpid-hosts

 ###
  -
    name: process - xinetd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C xinetd -a '/usr/sbin/xinetd -pidfile /var/run/xinetd.pid -stayalive'"
    hosts: zelenka, ancina, draghi
    hostgroups: rsyncd-hosts
  -
    name: unwanted process - xinetd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C xinetd"
    hostgroups: computers
    excludehosts: zelenka, ancina, draghi
    excludehostgroups: rsyncd-hosts
 ###
  -
    name: network service - finger
    check: check_tcp!79
    hosts: draghi
    depends: process - xinetd
 ###
  -
    name: network service - rsync
    check: check_tcp!873
    hostgroups: rsyncd-hosts
    depends: process - xinetd

  -
    name: network service - rsync
    check: check_tcp!873
    hosts: rietz2
    depends: rietz:process - xinetd

  -
    name: network service - rsync
    check: check_tcp!873
    hosts: kassia-sec
    depends: kassia:process - xinetd

 ###
  -
    name: process - nagios3
    # there is always one extra process per check currently running..
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:30 -c 1: -u nagios -C nagios3 -a '/usr/sbin/nagios3 -d /etc/nagios3/nagios.cfg'"
    hosts: spohr

 ###
  -
    name: process - apache2 - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1:1 -u root -C apache2 -a /usr/sbin/apache2"
    hostgroups: apache2-hosts
  -
    name: process - apache2 - worker
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:50 -c 1:100 -u www-data -C apache2 -a /usr/sbin/apache2"
    hostgroups: apache2-hosts
    depends: process - apache2 - master

  -
    name: network service - http
    check: check_http
    hostgroups: apache2-hosts
    excludehosts: kassia
    depends: process - apache2 - master
  -
    name: network service - http
    check: check_http
    depends: kassia:process - apache2 - master
    hosts: kassia-sec, kassia-ftp, kassia-volatile

  # keyserver on raff
  -
    name: network service - http keyserver
    check: dsa_check_http_port!11371
    hosts: kaufmann
    depends: process - apache2 - master

  # https on various hosts
  -
    name: network service - https
    check: check_https
    hosts: ries, chopin, draghi, liszt, spohr, widor, rietz
    depends: "process - apache2 - master"
    normal_check_interval: 120
  -
    name: network service - https cert
    check: dsa_check_cert!443
    # ries		ftp-master.debian.org
    # chopin		security-master.debian.org
    # spohr		rt.debian.org
    # spohr2		nagios.debian.org
    # draghi		db.debian.org
    # merkel2		nm.debian.org
    # liszt		lists.debian.org
    hosts: ries, chopin, spohr, spohr2, draghi, merkel2, liszt, widor, rietz
    depends: network service - https
    normal_check_interval: 60

  # spohr
  -
    name: network service - https
    check: check_https
    hosts: spohr2
    depends: "spohr:process - apache2 - master"
    normal_check_interval: 120
  -
    name: network service - http
    check: check_http
    hosts: spohr2
    depends: "spohr:process - apache2 - master"
  # merkel
  -
    name: network service - https
    check: check_https
    hosts: merkel2
    depends: "merkel:process - apache2 - master"
    normal_check_interval: 120
  -
    name: network service - http
    check: check_http
    hosts: merkel2
    depends: "merkel:process - apache2 - master"
 ####
  -
    name: process - named
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:15 -c 1: -u bind -C named -a '/usr/sbin/named -u bind'"
    hostgroups: bind9-hosts
  -
    name: network service - dns
    check: check_dns
    hostgroups: bind9-hosts
    depends: process - named
  -
    name: unwanted process - named
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:0 -C named"
    hostgroups: computers
    excludehostgroups: bind9-hosts

 ####
  -
    name: process - vsftp - listener
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1:1 -u root -C vsftpd -a 'vsftpd: LISTENER'"
    hostgroups: ftpd-hosts, uploadqueue
    excludehosts: kassia
  -
    name: process - vsftp - instance
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 0:80 -c 0:100 -u ftp -C vsftpd -a 'vsftpd: '"
    hostgroups: ftpd-hosts, uploadqueue
    excludehosts: kassia
  -
    name: network service - ftp
    check: check_ftp
    hostgroups: ftpd-hosts, uploadqueue
    excludehosts: kassia
    depends: process - vsftp - listener
  -
    name: network service - ftp
    check: check_ftp
    hosts: kassia-sec, kassia-ftp
    depends: kassia:process - xinetd

 ####
  -
    name: process - debianqueued
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:3 -c 1: -u dak -C debianqueued"
    hostgroups: uploadqueue

 ###
  #-
  #  name: process - postresql81 - master
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postmaster -a '/usr/lib/postgresql/8.1/bin/postmaster -D /var/lib/postgresql/8.1/main -c config_file=/etc/postgresql/8.1/main/postgresql.conf'"
  #  hostgroups: postgres81-hosts
  #-
  #  name: process - postresql81 - writer
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postmaster -a 'postgres: writer process'"
  #  hostgroups: postgres81-hosts
  #  depends: process - postresql81 - master
  #-
  #  name: process - postresql81 - buffer
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postmaster -a 'postgres: stats buffer process'"
  #  hostgroups: postgres81-hosts
  #  depends: process - postresql81 - master
  #-
  #  name: process - postresql81 - collector
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postmaster -a 'postgres: stats collector process'"
  #  hostgroups: postgres81-hosts
  #  depends: process - postresql81 - master
 ####
  -
    name: process - postresql84 - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postgres -a '/usr/lib/postgresql/8.4/bin/postgres'"
    hostgroups: postgres84-hosts
  -
    name: process - postresql83 - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postgres -a '/usr/lib/postgresql/8.3/bin/postgres -D /var/lib/postgresql/8.3/main -c config_file=/etc/postgresql/8.3/main/postgresql.conf'"
    hostgroups: postgres83-hosts
  #-
  #  name: process - postresql83 - master udd
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postgres -a '/usr/lib/postgresql/8.3/bin/postgres -D /var/lib/postgresql/8.3/udd -c config_file=/etc/postgresql/8.3/udd/postgresql.conf'"
  #  hosts: piatti
  -
    name: process - postresql83 - dak master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postgres -a '/usr/lib/postgresql/8.3/bin/postgres -D /var/lib/postgresql/8.3/dak -c config_file=/etc/postgresql/8.3/dak/postgresql.conf'"
    hosts: klecker, chopin
  -
    name: process - postresql84 - dak master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postgres -a '/usr/lib/postgresql/8.4/bin/postgres -D /var/lib/postgresql/8.4/dak -c config_file=/etc/postgresql/8.4/dak/postgresql.conf'"
    hosts: ries
  -
    name: process - postresql84 - dak-dev master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u postgres -C postgres -a '/usr/lib/postgresql/8.4/bin/postgres -D /var/lib/postgresql/8.4/dak-dev -c config_file=/etc/postgresql/8.4/dak-dev/postgresql.conf'"
    hosts: ries
 ####
  -
    name: process - mysql - master
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:2 -c 1: -u root -C mysqld_safe -a '/bin/sh /usr/bin/mysqld_safe'"
    hostgroups: mysql-hosts
  -
    name: process - mysql - workers
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:25 -c 1: -u mysql -C mysqld -a /usr/sbin/mysqld"
    hostgroups: mysql-hosts
    depends: process - mysql - master

 ####
  -
    name: process - stunnel4 - postgres-udd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u stunnel4 -C stunnel4 -a '/usr/bin/stunnel4 /etc/stunnel/postgres-udd-server.conf'"
    hosts: samosa
  -
    name: process - stunnel4 - postgres-udd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u stunnel4 -C stunnel4 -a '/usr/bin/stunnel4 /etc/stunnel/postgres-udd.conf'"
    hosts: merkel, master

  -
    name: udd stunnel - master cert
    nrpe: "/usr/lib/nagios/plugins/check_http -H localhost -p 8080 -S -C 14 -t 45"
    hosts: samosa

 ####
  #-
  #  name: process - xenconsoled
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C xenconsoled -a 'xenconsoled'"
  #  hosts: piatti
  #-
  #  name: process - xenstored
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C xenstored -a '/usr/lib/xen-3.0.3-1/bin/xenstored --pid-file /var/run/xenstore.pid'"
  #  hosts: piatti
  #-
  #  name: process - xend
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 2:2 -c 2: -u root -C python -a 'python /usr/lib/xen-3.0.3-1/bin/xend start'"
  #  hosts: piatti
#
 ####
  -
    name: process - libvirtd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1:1 -u root -C libvirtd -a '/usr/sbin/libvirtd -d'"
    hosts: unger

 ###
  -
    name: process - buildd
    servicegroups: buildd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u buildd -C buildd '/usr/bin/perl /usr/bin/buildd'"
    hostgroups: buildd
    contacts: luk

 ###
  #-
  #  name: process - tftpd
  #  nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C in.tftpd -a '/usr/sbin/in.tftpd -l -B 1450 -s /var/lib/tftpboot'"
  #  hostgroups: tftpd-hosts
 ###
#  -
#    name: process - dhcpd
#    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C dhcpd3 -a '/usr/sbin/dhcpd3 -q eth0'"
#    hosts: paer
 ###
  -
    name: process - smartd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C smartd -a '/usr/sbin/smartd --pidfile /var/run/smartd.pid --interval=1800'"
    hostgroups: smart

 ############ NFS Stuff ############
 ####
  -
    name: process - portmap
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u daemon -C portmap -a '/sbin/portmap'"
    hostgroups: nfs-client, nfs-server
  -
    name: process - statd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u statd -C rpc.statd -a '/sbin/rpc.statd'"
    hostgroups: nfs-client, nfs-server
  -
    name: process - nfsd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:10 -c 1: -u root -C nfsd -a '[nfsd]'"
    hostgroups: nfs-server
  -
    name: process - lockd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C lockd -a '[lockd]'"
    hostgroups: nfs-server
  -
    name: process - mountd
    nrpe: "/usr/lib/nagios/plugins/check_procs -w 1:1 -c 1: -u root -C rpc.mountd -a '/sbin/rpc.mountd'"
    hostgroups: nfs-server
 # see if the nfs stuff works and doesn't hang.
  # the df check all script will also hang, but we don't appear to pay attention to that
  -
    name: nfs mount ftp archive
    nrpe: "/usr/lib/nagios/plugins/check_disk 100 100 /org/mirrors/ftp.debian.org/ftp"
    hosts: merkel, raff
  -
    name: nfs mount ftp archive
    nrpe: "/usr/lib/nagios/plugins/check_disk 100 100 /srv/ftp.debian.org/ftp"
    hosts: bellini

 ############ MISC OTHER Stuff ############
 #####
  -
    name: mirror sync - bugs
    check: "dsa_check_mirrorsync!bugs.debian.org!project/trace/bugs-master.debian.org"
    hosts: global
  -
    name: mirror sync - security
    check: "dsa_check_mirrorsync!security-nagios.debian.org!project/trace/security-master.debian.org"
    hosts: global
  -
    name: mirror sync - packages
    check: "dsa_check_mirrorsync!packages.debian.org!Pics/.trace"
    hosts: global
    normal_check_interval: 15
    max_check_attempts: 5
    retry_check_interval: 5
  -
    name: DNS SOA sync - security.geo.debian.org
    check: "dsa_check_soas!security.geo.debian.org"
    hosts: global
  -
    name: DNS SOA sync - debian.org
    check: "dsa_check_soas_add!draghi.debian.org!debian.org"
    hosts: global
  -
    name: DNS SOA sync - debian.net
    check: "dsa_check_soas_add!draghi.debian.org!debian.net"
    hosts: global
  -
    name: DNS SOA sync - debian.com
    check: "dsa_check_soas_add!draghi.debian.org!debian.com"
    hosts: global
  -
    name: DNS SOA sync - mirror.debian.net
    check: "dsa_check_soas_add!draghi.debian.org!mirror.debian.net"
    hosts: global
  -
    name: DNS SOA sync - 144-28.118.59.86.in-addr.arpa
    check: "dsa_check_soas_add!draghi.debian.org!144-28.118.59.86.in-addr.arpa"
    hosts: global
  -
    name: DNS SOA sync - alioth.debian.org
    check: "dsa_check_soas_add!alioth.debian.org!alioth.debian.org"
    hosts: global
  -
    name: DNS SOA sync - 2.5.1.1.8.0.0.8.d.8.0.1.0.0.2.ip6.arpa
    check: "dsa_check_soas!2.5.1.1.8.0.0.8.d.8.0.1.0.0.2.ip6.arpa"
    hosts: global
  -
    name: DNS SOA sync - a.5.1.1.8.0.0.8.d.8.0.1.0.0.2.ip6.arpa
    check: "dsa_check_soas!a.5.1.1.8.0.0.8.d.8.0.1.0.0.2.ip6.arpa"
    hosts: global
  -
    name: DNS SOA sync - 2.1.0.0.0.0.0.2.8.8.8.0.1.0.0.2.ip6.arpa
    check: "dsa_check_soas!2.1.0.0.0.0.0.2.8.8.8.0.1.0.0.2.ip6.arpa"
    hosts: global
  -
    name: DNS SOA sync - 2.6.a.0.4.6.5.6.1.0.0.0.2.0.0.0.8.d.8.0.1.0.0.2.ip6.arpa
    check: "dsa_check_soas!2.6.a.0.4.6.5.6.1.0.0.0.2.0.0.0.8.d.8.0.1.0.0.2.ip6.arpa"
    hosts: global
 ############
  -
    name: ping alive check
    remotecheck: "/usr/lib/nagios/plugins/check_ping -H $HOSTADDRESS$ -w 50,10% -c 200,30%"
    runfrom: dijkstra
    hosts: giustini
    normal_check_interval: 5
    max_check_attempts: 4
    retry_check_interval: 1
  -
    name: Overall Unit Status
    remotecheck: "/usr/lib/nagios/plugins/check_snmp -H $HOSTADDRESS$ -C public -P 2c -o connUnitStatus -n -c 3 -w 3"
    runfrom: dijkstra
    hosts: giustini
